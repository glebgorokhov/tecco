//Мобильное меню
$('.header__burgermenu').click(function(){
	$(this).toggleClass("active");
	$('.header__side').toggleClass("active");
});

//Карточки на странице technology
$('.technology__card').click(function(){
	$('.technology__card').not(this).removeClass('active');
	$(this).toggleClass('active');
});

//Переключение вида блоков на странице cases
$('.cases__switcher li').click(function(){
	$(this).siblings().removeClass('active');
	$(this).addClass('active');
	var casewidth = $(this).attr('data-width');
	if ( casewidth == "squares" ) {
		$('.cases__list').addClass('squares');
	} else {
		$('.cases__list').removeClass('squares');
	}
});

//Карта на странице contacts в мобилке
$('.contacts__pinsquare').click(function(){
	$(this).toggleClass('active');
	$('.contacts__map').toggleClass('active');
});

//Фильтр кейсов
$('.case__filter').click(function(e){
	e.preventDefault();
	$('.case__filter.active').removeClass('active');
	$(this).addClass('active');
	var category = $(this).attr('data-category');
	if (category == "all") {
		$('.cases__list > li').show();
	} else {
		$('.cases__list > li').hide();
		$('.cases__list > li[data-category='+category+']').show();
	}
});

//Поделиться на странице кейса
$('.squareblock__social').click(function(e){
	e.preventDefault();
	alert("Hello!");
})



// Плавное появление блоков при скролле
window.sr = ScrollReveal();
var fooReveal = {delay: 100, distance: '50px', easing: 'cubic-bezier(0.3, 0.5, 0.1, 1)', scale: 1, mobile: false, duration: 1000};
var fooReveal1 = {delay: 200, distance: '50px', easing: 'cubic-bezier(0.3, 0.5, 0.1, 1)', scale: 1, mobile: false, duration: 1000};
sr.reveal('.content__heading, .content__text, .company__quotetext, .company__quoteauthor, .content__scroll-link, .content__bgphone, .services__list, .services__quote', fooReveal);
sr.reveal('.company__abouttext, .company__features, .content__smalltext', fooReveal1);




// Фиксировать экран для самописных модальных окон
function fixscreen() {
  window.scroll = $(window).scrollTop();
  $("body").css('top', -scroll + 'px').toggleClass('noscroll');
}

function unfixscreen() {
  $("body").css('top', "0").toggleClass('noscroll');
  $(window).scrollTop(scroll);
}



// Показ прелоадера при отправке формы
$(document).on({
  ajaxStart: function() { $(".preloader").addClass("active");},
  ajaxStop: function() { $(".preloader").removeClass("active");}
});



// Плавно скрыть/показать блок
function hideblock(el) {
  setTimeout(function() {$(el).show();}, 700);
  setTimeout(function() {$(el).css("opacity", "1");}, 900);
}

function showblock(el) {
  setTimeout(function() {$(el).css("opacity", "0");}, 700);
  setTimeout(function() {$(el).show();}, 900);
}



// Ссылки навигации по странице (добавить класс nav к ссылке с #)
$("a.nav").click(function(event){     
    event.preventDefault();
    $('html,body').animate({scrollTop:$(this.hash).offset().top}, 1200);
});



// AJAX форма
$(document).ready(function() {
    $('form').ajaxForm(function() {
        // Успешная отправка формы
        $.fancybox([{href : '#success', fitToView   : false, autoSize    : true, openEffect  : 'fade', closeEffect : 'fade',}]);
    }); 
}); 



// Маска для поля ввода телефона
$(document).ready(function(){
   $("input[name='tel']").inputmask("+7 (999) 999-99-99");
});



// Кросс-браузерный Placeholder
function supports_input_placeholder() {var i = document.createElement('input'); return 'placeholder' in i;}

if (!supports_input_placeholder()) {
  var fields = document.getElementsByTagName('INPUT');
  for(var i=0; i < fields.length; i++) {
    if(fields[i].hasAttribute('placeholder')) {
      fields[i].defaultValue = fields[i].getAttribute('placeholder');
      fields[i].onfocus = function() { if(this.value == this.defaultValue) this.value = ''; }
      fields[i].onblur = function() { if(this.value == '') this.value = this.defaultValue; }
    }
  }
}

// Выделение элемента меню при нахождении на соответствующей странице
$(document).ready(function(){
	var page = $('section').data('page');
	console.log(page);
	$('.header__menu a[data-page='+page+']').addClass('active');
});

/*// Параллакс
// Картинка на странице "Пациентам"
function parallax() {
    var el = $(".company__cityview");
    var h1 = el.offset().top;
    var blockheight = el.outerHeight();
    var scroll = $(window).scrollTop();
    if ( (scroll > (h1 - $(window).height())) ) {
        var percents = scroll/blockheight;
        $(".company__cityview img.colored").css("transform", "translate3d(0,"+(178-percents*200)+"px,0)");
    }
}

// Запускаем параллакс
$(window).scroll(function(){
	if ($('*').is('.company__cityview')) {
//		parallax();
	}
});*/